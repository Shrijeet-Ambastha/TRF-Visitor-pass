
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Visitor Pass Generator</title>
  <link href="style.css" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(120deg, #f0f4f8, #d9e2ec);
      font-family: 'Segoe UI', sans-serif;
    }

    .container {
      max-width: 500px;
      margin: 60px auto;
      padding: 40px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .logo {
      display: block;
      margin: 0 auto 20px;
      width: 80px;
    }

    h1 {
      text-align: center;
      margin-bottom: 25px;
      color: #2c3e50;
    }

    form {
      display: flex;
      flex-direction: column;
    }

    input {
      margin-bottom: 15px;
      padding: 12px;
      font-size: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      transition: 0.3s;
    }

    input:focus {
      border-color: #007bff;
      outline: none;
    }

    button {
      padding: 12px;
      background-color: #007bff;
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div class="container">
  <h2 style="text-align:center; color:#004080; font-size:28px; font-weight:bold; margin-bottom: 10px;">
  TRF Ltd
</h2>
  <h1>Visitor Pass Form</h1>
  <form id="visitorForm">
    <button type="button" id="startCamera" style="margin-bottom: 15px;">üì∑ Start Camera</button>
     <video id="camera" autoplay playsinline width="300" style="margin: 10px auto; display: block;"></video>
    
    

<canvas id="snapshot" width="300" height="225" style="display: none;"></canvas>
<input type="hidden" id="photoData" name="photoData" />

    <input name="name" placeholder="Full Name" required />
    <input name="email" placeholder="Your Email" type="email" required />
    <input name="phone" placeholder="Phone Number" required />
    <input name="visitDate" type="date" required />
    <label for="visitTime">Visit Time:</label>
<input type="time" id="visitTime" name="visitTime" required />

<label for="endTime">End Time:</label>
<input type="time" id="endTime" name="endTime" required />

    <input name="host" placeholder="Whom to Visit" required />
    <input name="hostEmail" placeholder="Host Email" type="email" required />
    <input name="purpose" placeholder="Purpose of Visit" required />
    
<!-- Type of Person -->
<label for="personType">Type of Person:</label>
<select id="personType" name="personType" required>
  <option value="">Select type</option>
  <option value="Contractor">Contractor</option>
  <option value="Visitor">Visitor</option>
  <option value="Intern">Intern</option>
</select>

<!-- Area of Visit -->
<label for="visitArea">Area of Visit:</label>
<select id="visitArea" name="visitArea" required>
  <option value="">Select area</option>
  <option value="Works">Plant</option>
  <option value="General Office">Office</option>
  
</select>

<!-- PPE Required -->
<label for="ppe">PPE Required:</label>
<select id="ppe" name="ppe" required>
  <option value="">Select PPE</option>
  <option value="Helmet">Helmet</option>
  <option value="Safety Shoes">Safety Shoes</option>
  <option value="Goggles">Goggles</option>
  <option value="None">None</option>
  <option value="All">All</option>
</select>

<!-- Govt ID Type -->
<label for="govtIdType">Govt Authorized Proof:</label>
<select id="govtIdType" name="govtIdType" required>
  <option value="">Select ID Type</option>
  <option value="Aadhar">Aadhar</option>
  <option value="PAN">PAN</option>
  <option value="Voter ID">Voter ID</option>
</select>

<!-- ID Number -->
<label for="govtIdNumber">ID Number:</label>
<input type="text" id="govtIdNumber" name="govtIdNumber" required />

<label for="laptopNo">Laptop No.:</label>
<select id="laptopNoSelect" name="laptopNo">
  <option value="NA">NA</option>
  <option value="LAP123">LAP123</option>
  <option value="Other">Other</option>
</select>
<input type="text" id="laptopNoInput" name="laptopNo" style="display:none;" placeholder="Enter Laptop No" />
<!-- Vehicle No -->
<label for="vehicleNo">Vehicle No:</label>
<select id="vehicleNoSelect" name="vehicleNo">
  <option value="NA">NA</option>
  <option value="JH01AB1234">JH01AB1234</option>
  <option value="JH01CD5678">JH01CD5678</option>
  <option value="Other">Other</option>
</select>

<input
  type="text"
  id="vehicleNoInput"
  name="vehicleNo"
  placeholder="Enter Vehicle No"
  style="display: none; margin-top: 8px;"
/>


<button type="submit">Generate Pass</button>
    <button id="printBtn" style="display: none; margin-top: 15px;">üñ®Ô∏è Print Visitor Pass</button>
  </form>
</div>

  <script src="script.js"></script>

<script>
  const form = document.getElementById("visitorForm");
  const video = document.getElementById("camera");
  const canvas = document.getElementById("snapshot");
  const photoInput = document.getElementById("photoData");
  const startBtn = document.getElementById("startCamera");
  const laptopSelect = document.getElementById("laptopNoSelect");
  const laptopInput = document.getElementById("laptopNoInput");
  const vehicleSelect = document.getElementById("vehicleNoSelect");
  const vehicleInput = document.getElementById("vehicleNoInput");

  // üé• Start camera on button click
  startBtn.addEventListener("click", () => {
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        video.srcObject = stream;
      })
      .catch(err => {
        console.error("Camera access denied:", err);
        alert("‚ö†Ô∏è Please allow camera access to capture your photo.");
      });
  });

  // üñº Capture photo on form submit
  form.addEventListener("submit", function (e) {
    const context = canvas.getContext("2d");
    context.drawImage(video, 0, 0, canvas.width, canvas.height);
    const dataURL = canvas.toDataURL("image/png");
    photoInput.value = dataURL;
  }); // ‚úÖ this was wrong before

  // üíª Laptop input toggle
  function handleLaptopChange() {
    if (laptopSelect.value === "Other") {
      laptopInput.style.display = "block";
      laptopInput.name = "laptopNo";
      laptopSelect.name = "";
    } else {
      laptopInput.style.display = "none";
      laptopInput.name = "";
      laptopSelect.name = "laptopNo";
    }
  }

  // üöó Vehicle input toggle
  function handleVehicleChange() {
    if (vehicleSelect.value === "Other") {
      vehicleInput.style.display = "block";
      vehicleInput.name = "vehicleNo";
      vehicleSelect.name = "";
    } else {
      vehicleInput.style.display = "none";
      vehicleInput.name = "";
      vehicleSelect.name = "vehicleNo";
    }
  }

  // Attach event listeners
  laptopSelect.addEventListener("change", handleLaptopChange);
  vehicleSelect.addEventListener("change", handleVehicleChange);

  // ‚úÖ Run once on load
  window.onload = function () {
    handleLaptopChange();
    handleVehicleChange();
  };
</script>



</body>
</html>


